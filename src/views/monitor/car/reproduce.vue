<template>
  <el-container class="view-container h">
    <CarDetails :query="this.$route.query"></CarDetails>
    <el-col>
      <div class="search">
        <div class="block">
          查询时间段：
          <el-date-picker
            v-model="timer"
            class="mr3"
            type="datetimerange"
            range-separator="至"
            start-placeholder="开始日期"
            end-placeholder="结束日期">
          </el-date-picker>
          <span class="mr3">轨迹点:0</span>
          <span class="mr3">时间段内总里程:0KM</span>
          <span>时间段内总油耗:0L</span>
        </div>
        <div class="block">
          <span style="color:red">可查询90天内，时间跨度最长7天的数据</span>
          <el-button type="basic" @click="click">测试数据</el-button>
        </div>

      </div>

      <truck-map :index="0" />
    </el-col>
  </el-container>

</template>
<script>
  import Bus from '@/utils/eventBus.js';
  import CarDetails from '@/components/CarDetail'
  import { mapMutations,mapGetters } from 'vuex'
  import TruckMap from '../track-map/truck-map.vue'
  export default {
    components: {
      CarDetails,
      TruckMap
    },

    data() {
      return {
        loading: false,
        timer:[new Date(2000, 10, 10, 10, 10), new Date(2000, 10, 11, 10, 10)]
      }
    },
    mounted() {

    },
    methods: {
      ...mapMutations({
        'CHANGE_PLAY_INDEX': 'truck/CHANGE_PLAY_INDEX',
        'CHANGE_ALL_POINTES':'truck/CHANGE_ALL_POINTES'
      }),
      click(){
          //todo 假数据
        const points =
          {"code":200,"message":"success","data":[{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:40:47","speed":"83","direction":"195","longitude":115.55985638760373,"latitude":37.3087077400442,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:41:17","speed":"82","direction":"198","longitude":115.5577174620903,"latitude":37.30273379296239,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:41:47","speed":"84","direction":"203","longitude":115.55489575248563,"latitude":37.29674061066983,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:42:17","speed":"79","direction":"209","longitude":115.5515419366393,"latitude":37.291267963400706,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:42:47","speed":"79","direction":"214","longitude":115.54750228785483,"latitude":37.286032706562544,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:43:17","speed":"83","direction":"215","longitude":115.54324661187397,"latitude":37.281053473795296,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:43:47","speed":"83","direction":"215","longitude":115.5388060559881,"latitude":37.27583814749418,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:44:17","speed":"81","direction":"211","longitude":115.53447335773717,"latitude":37.270546698717624,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:44:47","speed":"82","direction":"205","longitude":115.53082577556002,"latitude":37.26503123343046,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:45:17","speed":"79","direction":"200","longitude":115.52796573728244,"latitude":37.25956432853605,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:45:47","speed":"85","direction":"194","longitude":115.52556833195935,"latitude":37.25348488343724,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:46:17","speed":"85","direction":"189","longitude":115.52393846256201,"latitude":37.24713802208526,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:46:47","speed":"67","direction":"189","longitude":115.52281199140958,"latitude":37.24143496412737,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:47:17","speed":"70","direction":"189","longitude":115.52189176892803,"latitude":37.23653989921422,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:47:47","speed":"74","direction":"189","longitude":115.520800673817,"latitude":37.2310808628761,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:48:17","speed":"82","direction":"190","longitude":115.51959104669932,"latitude":37.22522978034002,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:48:47","speed":"82","direction":"195","longitude":115.51772355177064,"latitude":37.219131506830124,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:49:17","speed":"82","direction":"201","longitude":115.51522286032765,"latitude":37.21331851924426,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:49:47","speed":"81","direction":"206","longitude":115.5119661144537,"latitude":37.207547628408236,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:50:17","speed":"82","direction":"207","longitude":115.50846155700934,"latitude":37.20211599642961,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:50:47","speed":"77","direction":"205","longitude":115.50506756595163,"latitude":37.196647838836434,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:51:17","speed":"85","direction":"200","longitude":115.50217048211665,"latitude":37.19117455607235,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:51:47","speed":"85","direction":"196","longitude":115.49964441358486,"latitude":37.184950745322624,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:52:17","speed":"88","direction":"196","longitude":115.49734393869892,"latitude":37.17876120944425,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:52:47","speed":"83","direction":"196","longitude":115.49504000476118,"latitude":37.17253476565753,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:53:17","speed":"82","direction":"199","longitude":115.49278273875932,"latitude":37.16669847237444,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:53:47","speed":"84","direction":"204","longitude":115.48980880347054,"latitude":37.16079311685602,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:54:17","speed":"81","direction":"209","longitude":115.48629532324694,"latitude":37.155382784394334,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:54:47","speed":"82","direction":"215","longitude":115.48199321754447,"latitude":37.15019083694458,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:55:17","speed":"82","direction":"220","longitude":115.47709709182568,"latitude":37.14535444941536,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:55:47","speed":"80","direction":"221","longitude":115.47206967971853,"latitude":37.14082294114638,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:56:17","speed":"80","direction":"219","longitude":115.46712305361537,"latitude":37.13635963455537,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:56:47","speed":"83","direction":"213","longitude":115.46249501300021,"latitude":37.13147228484579,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:57:17","speed":"78","direction":"207","longitude":115.45861406191214,"latitude":37.126243509502345,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:57:47","speed":"84","direction":"207","longitude":115.45519067784406,"latitude":37.120949393696655,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:58:17","speed":"83","direction":"212","longitude":115.45129631429373,"latitude":37.11546218114086,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:58:47","speed":"83","direction":"217","longitude":115.4468148374004,"latitude":37.1104040676021,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:59:17","speed":"82","direction":"213","longitude":115.44222329365495,"latitude":37.10527315018628,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-14 23:59:47","speed":"81","direction":"207","longitude":115.43841684209595,"latitude":37.10002042361226,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:00:17","speed":"81","direction":"201","longitude":115.43515622456485,"latitude":37.094250312415625,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:00:47","speed":"80","direction":"200","longitude":115.43251236972456,"latitude":37.088677232479675,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:01:17","speed":"85","direction":"200","longitude":115.42969028722338,"latitude":37.08266849632794,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:01:47","speed":"84","direction":"202","longitude":115.42686118223844,"latitude":37.07669789434184,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:02:17","speed":"83","direction":"207","longitude":115.42352410249448,"latitude":37.07089202885079,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:02:47","speed":"84","direction":"213","longitude":115.4196189442011,"latitude":37.06545853176993,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:03:17","speed":"84","direction":"218","longitude":115.41501997418483,"latitude":37.06021541427978,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:03:47","speed":"83","direction":"223","longitude":115.40985794885724,"latitude":37.05533457465369,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:04:17","speed":"87","direction":"229","longitude":115.40412190724791,"latitude":37.05084639257776,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:04:47","speed":"84","direction":"234","longitude":115.39768587456763,"latitude":37.04671231765143,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:05:17","speed":"82","direction":"235","longitude":115.39119183514241,"latitude":37.04309799617679,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:05:47","speed":"78","direction":"231","longitude":115.3851410729685,"latitude":37.039600792904444,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:06:17","speed":"85","direction":"227","longitude":115.37938384455279,"latitude":37.03556022981109,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:06:47","speed":"82","direction":"220","longitude":115.37402561678118,"latitude":37.031114346485474,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:07:17","speed":"77","direction":"215","longitude":115.36938544596669,"latitude":37.02640358849178,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:07:47","speed":"80","direction":"209","longitude":115.36536380887435,"latitude":37.02141336586848,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:08:17","speed":"82","direction":"203","longitude":115.36193029106991,"latitude":37.016081630979926,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:08:47","speed":"84","direction":"198","longitude":115.35902548768759,"latitude":37.01016438020215,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:09:17","speed":"83","direction":"195","longitude":115.35682609617898,"latitude":37.004208990436794,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:09:47","speed":"79","direction":"196","longitude":115.35471149432512,"latitude":36.99821757946205,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:10:17","speed":"83","direction":"202","longitude":115.35213057526052,"latitude":36.99246336244703,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:10:47","speed":"80","direction":"208","longitude":115.3488266695973,"latitude":36.98701729816721,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:11:17","speed":"81","direction":"208","longitude":115.34498313925356,"latitude":36.98170093634371,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:11:47","speed":"77","direction":"203","longitude":115.34176770456767,"latitude":36.97649945724976,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:12:17","speed":"82","direction":"197","longitude":115.33908204200029,"latitude":36.97076108959459,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:12:47","speed":"81","direction":"197","longitude":115.33669545713327,"latitude":36.96491151467877,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:13:17","speed":"76","direction":"198","longitude":115.3344811495249,"latitude":36.959355238506845,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:13:47","speed":"85","direction":"202","longitude":115.3318238075717,"latitude":36.95354223890604,"avgOil":"28.4","address":null,"autoDriverFlag":null},{"teamCode":null,"teamName":"三级机构","truckPlate":"辽F44429","reportTime":"2020-07-15 00:14:17","speed":"78","direction":"207","longitude":115.32859433527726,"latitude":36.948031638759744,"avgOil":"28.4","address":null,"autoDriverFlag":null}]
          }
        this.CHANGE_ALL_POINTES(points.data)
        Bus.$emit('truck_init');
      }
    }
  }
</script>
<style lang="scss" scoped>
  .wh{
    min-height: 300px;
    padding-top: 30px;
    margin-top: 10px;
  }
  .mr3{
    margin-right:3px;
  }
</style>
